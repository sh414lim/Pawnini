<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %>
<%@ taglib uri="http://java.sun.com/jstl/core_rt" prefix="core" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>


<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>CS getCsList -- working on css/html</title>
    <style type="text/css">
    	.main_title {
		text-align: center;
		padding: 20px auto;
		color: rosyBrown;
	}
   a, a:hover, a:focus, a:active {
      color: black;
      text-decoration: none;
   }
	</style>    
<link type="text/css" rel="stylesheet" href="../style/cs.css"/>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
<link rel="stylesheet" href="style/Header.css"/>
<link rel="stylesheet" href="style/footer.css"/>
<script src="https://use.fontawesome.com/releases/v5.2.0/js/all.js"></script>
 
</head>
<%@ include file="../include/HeaderBoot.jsp"%>
<body> 
    <div class="Login">
        <ul class="Login_ul">
          <li><a href="./Login.html">LOGIN</a></li>
          <li><a href="./signUp.html">SignUp</a></li>
          <li><a href="./Mypage.html">My Pages</a></li>
          <li class="Manager">
            ê´€ë¦¬ì
            <span class="dropmenu">
              <!-- ê´€ë¦¬ì ì¹´í…Œê³ ë¦¬ ë©”ë‰´ ì—°ë™ -->
              <span><a href="./Mypage.html">ë¶„ì–‘ê´€ë¦¬</a></span>
              <span><a href="./Mypage.html">íšŒì›ê´€ë¦¬</a></span>
              <span><a href="./Mypage.html">ìƒí’ˆê´€ë¦¬</a></span>
            </span>
          </li>
        </ul>
      </div>
      <header class="Header_menu">
        <div class="Title">
          <a href="./main.html">
            <h1>PaAWnini</h1>
          </a>
          <input class="Header_input" type="text" placeholder="Search..." />
        </div>
  
        <a class="basket" href="basket.html">
          <i class="fas fa-shopping-cart fa-lg"></i>
        </a>
  
        <ul class="Header_ul">
          <li class="Dog_dropmenu">
            Dog
            <span class="dropmenu">
              <span><a href="./product/Snack.html">Snack</a></span>
              <span><a href="./product/Supplies.html">Supplies</a></span>
              <span><a href="./product/meal.html">meal</a></span>
            </span>
          </li>
          <li class="Cat_dropmenu">
            Cat
            <span class="dropmenu">
              <span><a href="./productCat/Snack.html">Snack</a></span>
              <span><a href="./productCat/Supplies.html">Supplies</a></span>
              <span><a href="./productCat/meal.html">meal</a></span>
            </span>
          </li>
          <li><a href="./EVENT/event.html">Event</a></li>
          <li><a href="./Service/Service.html">Service</a></li>
  
          <li class="Dog_dropmenu">
            <a href="./Adopotion/Adoption.html"> Adoption</a>
            <span class="dropmenu">
              <span><a href="./Adopotion/dog.html">Dog</a></span>
              <span><a href="./Adopotion/Cat.html">Cat</a></span>
            </span>
          </li>
          <li><a href="./NOTIC/Notice.html">Notice</a></li>
        </ul>
      </header>

<!-- my bit -->
	<div class="Guide">
      <span>ê³ ê°ì„¼í„°</span>
    </div>
	
	<!-- ê²€ìƒ‰ ê¸°ëŠ¥ -->
		<form role="getForm" method="get">
	  	 <div class="container">
	           <div class="col-xs-2 col-sm-3">
					<select class="form-control" name="searchOption2">
							<option value="nth" <core:out value="${scri.searchOption eq null ? 'selected' : '' }"/>>- - ğŸ˜º í•„í„° ğŸ¶ - -</option>
							<option value="t"<core:out value="${scri.searchOption eq 't' ? 'selected' : '' }"/>>ì œëª©</option>
							<option value="w"<core:out value="${scri.searchOption eq 'w' ? 'selected' : '' }"/>>ì‘ì„±ì</option>
							<option value="c"<core:out value="${scri.searchOption eq 'c' ? 'selected' : '' }"/>>ë‚´ìš©</option>
							<option value="twc"<core:out value="${scri.searchOption eq 'twc' ? 'selected' : '' }"/>>ì œëª©+ì‘ì„±ì+ë‚´ìš©</option>	
					</select>
				</div>	
				<div class="col-xs-8 col-sm-8">
					<div class="input-group">
							<input class="form-control" type="text" name="searchKeyword" id="keywordInput" placeholder="í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”..." value="${scri.searchKeyword }"/>
							<span class="input-group-btn"><button id="searchBtn" type="button" class="btn btn-primary">ê²€ìƒ‰! <i class="fas fa-search"></i></button></span>		
					</div>
				</div>	
				<div class="col-xs-2 col-sm-1">
					<span class="input-group-btn"><button type="button" class="btn btn-outline-secondary" style="border-radius: 10px;"><a href="redirectInsertCs.do">ìƒˆ ê¸€ ì¶”ê°€</a></button></span> <!--  ë¡œê·¸ì¸ í•´ì•¼í•¨ -->											
					<!--<button type="button" class="btn btn-secondary"><a href="getCsList.do">ìƒˆë¡œê³ ì¹¨</a></button>   -->	
				</div>
			</div>

		<!-- ìƒë‹¨ í…Œì´ë¸” -->
   		<section class="container " style="margin-top:20%">		
			<core:choose>	
				<core:when test="${csPagination.totalCount > 0 }">
					<span> ê²Œì‹œê¸€ ìˆ˜  : ${csPagination.totalCount}</span>
					<table  class="table table-hover">
						<tr class="cs"> <!-- from cs.css, need to fix it -->
							<th>ë²ˆí˜¸</th>
							<th>ì œëª©</th>
							<th>ì‘ì„±ì</th>
					<!-- 	<th>ê³µê°œ ì—¬ë¶€</th>  -->
							<th>ì‘ì„±ì¼</th>
							<th>ì¡°íšŒìˆ˜</th>
					<!--  	
							<core:if test="${member.member_grade eq 2 }">
					-->		
								<th  class="admin btn btn-default">ê´€ë¦¬ì ë²„íŠ¼</th>
					<!-- 	
							</core:if>
					-->		
						</tr>
						
						<core:forEach var="cs" items="${ csList }">
							<tr>	
								<td width="5%">${cs.cs_id }</td>
								<td width="*" align="left">
									<span style="padding-right:15px"></span>
									<!-- ë¹„ê³µê°œì¼ë•Œ ì¡°ê±´ -->
									 <core:if test="${cs.cs_show eq 'N'}" >
										 <i class="fas fa-lock"></i>
							              <core:choose>
									           <core:when test="${cs.member_id eq member.member_id || member.member_grade eq 2}"> 
													<core:choose>
														<core:when test="${cs.cs_re_order > 0 }">
															<core:forEach begin="1" end="${cs.cs_re_order}"  step="1">
																<span style="padding-left:20px; font-weight:bold; color:red;">Re : â†ª   </span>
															</core:forEach>
															<a href="getCs.do?cs_id=${cs.cs_id }&curPage=${scri.curPage}&perPageNum=${scri.perPageNum }&searchOption=${scri.searchOption}&searchKeyword=${scri.searchKeyword}">${cs.cs_title}</a>
														</core:when>
														<core:otherwise>
																<a href="getCs.do?cs_id=${cs.cs_id }&curPage=${scri.curPage}&perPageNum=${scri.perPageNum }&searchOption=${scri.searchOption}&searchKeyword=${scri.searchKeyword}">${cs.cs_title}</a>
														</core:otherwise>
													</core:choose>	
												</core:when>
												<core:otherwise>ë¹„ë°€ê¸€ì€ ì‘ì„±ìì™€ ê´€ë¦¬ìë§Œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</core:otherwise>
											</core:choose>
									</core:if>
									<!-- ê³µê°œì¼ë•Œ ì¡°ê±´ -->
									<core:if test="${cs.cs_show eq 'Y'}" >
	              						<core:choose>
											<core:when test="${cs.cs_re_order > 0 }">
												<core:forEach begin="1" end="${cs.cs_re_order}"  step="1">
													<span style="padding-left:15px; font-weight:bold; color:red;">Re : â†ª  </span>
												</core:forEach>
											<a href="getCs.do?cs_id=${cs.cs_id }&curPage=${scri.curPage}&perPageNum=${scri.perPageNum }&searchOption=${scri.searchOption}&searchKeyword=${scri.searchKeyword}">${cs.cs_title}</a>
											</core:when>
											<core:otherwise>
												<a href="getCs.do?cs_id=${cs.cs_id }&curPage=${scri.curPage}&perPageNum=${scri.perPageNum }&searchOption=${scri.searchOption}&searchKeyword=${scri.searchKeyword}">${cs.cs_title}</a>
											</core:otherwise>
										</core:choose>	
	               					</core:if>
	               					<!-- TESSSSSSSSSSSSSSSST -->
	               		<!-- 		<core:if test="${cs.cs_fileName ne null || cs.cs_fileName ne ''}">
	               						<span style="text-align:right; margin-left: 20px"><i class="far fa-file-alt"></i></span>
	               					</core:if>		 -->	
            					</td>
            					<core:choose>
	            					<core:when  test="${ member.member_grade eq 1 }">
	            						<td width="15%"><span style="color:red; font-weight:bold;">ê´€ë¦¬ì</span></td>
	            					</core:when>
	            					<core:otherwise>
		            					<td width="15%">${cs.cs_writer}</td>
	            					</core:otherwise>
            					</core:choose>
    					<!--  		<td width="5%">${cs.cs_show }</td>   -->
								<td width="20%"><fmt:formatDate value="${cs.cs_regdate }" pattern="yyyyë…„ MMì›” ddì¼ HHì‹œ"/></td>			
								<td width="5%">${cs.cs_hit }</td>
								<core:if test="${member.member_grade eq 2 }">
									<td width="10%" class="admin">
										<button type="button" class="update_btn btn btn-outline-primary"><a href="updateCs.do?cs_id=${cs.cs_id}">ìˆ˜ì •</a></button> 
										<button type="button" class="delete_btn btn btn-outline-primary"><a href="deleteCs.do?cs_id=${cs.cs_id}">ì‚­ì œ</a></button> 		
									</td>		
								</core:if>		
							</tr>								
						</core:forEach>
					</table>
				</core:when>
				<core:otherwise>
					<p class="empty"><b><span>ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤.. ğŸ‘»</span></b></p>	
				</core:otherwise>
			</core:choose>	
		</section>
		
	<!--  css : add curpage, pagination (no outline), nextpage, prevpage  -->
		<section class="container">
		<core:if test="${csPagination.totalCount > 0 }">
				<!-- í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜ ì¶œë ¥ -->
					<table class="pagination">
						<tr>
							<td colspan="7" align="center">
							 <core:if test="${csPagination.prev}">
							  	<a class="prevpage" href="getCsList.do${csPagination.makeSearch(csPagination.startPage - 1)}">â—€ ì´ì „</a>
							  </core:if> 
							<core:forEach var="num"  begin="${csPagination.startPage}" end="${csPagination.endPage}">
									<core:choose>
										<core:when test="${csPagination.cri.curPage eq num }">
											<a href="getCsList.do${csPagination.makeSearch(num)}" class="curpage">${num}</a>&nbsp;
										</core:when>
										<core:otherwise>
											<a href="getCsList.do${csPagination.makeSearch(num)}">${num}</a>&nbsp;
										</core:otherwise>
									</core:choose>
							</core:forEach>
							<core:if test="${csPagination.next && csPagination.endPage >0}">
							 <a class="nextpage" href="getCsList.do${csPagination.makeSearch(csPagination.endPage+1)}">ë‹¤ìŒ â–¶</a>
							</core:if>
							</td>
						</tr>			
					</table>
		</core:if>
		</section>	
	</form>
	</div>
    <div class="Bouns">
        <ul class="Bouns_ul">
          <li>
            <h3> <i class="fas fa-drumstick-bite lg"></i>ì‹ ì„ í•œ ì‚¬ë£Œ</h3>
          </li>
          <li>
            <h3><i class="far fa-clock"></i>ìœ í†µê¸°í•œ 100% ì±…ì„ì œ</h3>
         
          </li>
          <li>
            <h3><i class="fas fa-shipping-fast"></i>ì‹ ì†! ì •í™•! ë°°ì†¡!</h3>
          </li>
          <li>
            <h3><i class="fas fa-rss"></i>ë§Œì› ì´ìƒ êµ¬ë§¤ì‹œ ë¬´ë£Œë°°ì†¡</h3>
          </li>
       
      </div>
  
      <footer>
        <div class="Coment">
          <ul class="Coment_Ul">
            <li class="Coment_li">
              <span class="Coment_span">REVERSIBLE HARNESSES</span>
              <span class="Coment_span">COLLARS</span>
              <span class="Coment_span">BANDANAS</span>
              <span class="Coment_span">HAIR RIBBONS & BRACELETS FOR HUMANS</span>
            </li>
          </ul>
  
          <ul class="Coment_Ul">
            <li class="Coment_li">
              <span class="Coment_span">REVERSIBLE HARNESSES</span>
              <span class="Coment_span">COLLARS</span>
              <span class="Coment_span">BANDANAS</span>
              <span class="Coment_span">HAIR RIBBONS & BRACELETS FOR HUMANS</span>
            </li>
          </ul>
  
          <ul class="Coment_Ul">
            <li class="Coment_li">
              <span class="Coment_span">REVERSIBLE HARNESSES</span>
              <span class="Coment_span">COLLARS</span>
              <span class="Coment_span">BANDANAS</span>
              <span class="Coment_span">HAIR RIBBONS & BRACELETS FOR HUMANS</span>
            </li>
          </ul>
  
          <ul class="Coment_Ul">
            <li class="Coment_li">
              <span class="Coment_span">REVERSIBLE HARNESSES</span>
              <span class="Coment_span">COLLARS</span>
              <span class="Coment_span">BANDANAS</span>
              <span class="Coment_span">HAIR RIBBONS & BRACELETS FOR HUMANS</span>
            </li>
          </ul>
        </div>
      </footer>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js"></script>
	<script>
	$(document).ready(function () {
		var formObj = $("form[name='getForm']");
	
		//ê²Œì‹œë¬¼ ì§€ìš°ê¸°
		$(".delete_btn").on("click", function(){
			var yn = confirm("ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? \nê²Œì‹œë¬¼ ì‚­ì œì‹œ ë‹µë³€ë„ í•¨ê²Œ ì‚­ì œë©ë‹ˆë‹¤");
			if (yn == true) {
				formObj.attr("action", "deleteCs.do");
				formObj.attr("method", "post");
				formObj.submit();
				alert("ê²Œì‹œë¬¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤");
				location.reload();
			} else {
				alert("ì‚­ì œë¥¼ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
				return;
			}		
		})
	})
	
		function getCsList(curPage) {
			location.href="${path}/cs/getCsList?curPage="+curPage+"&searchOption=${searchOption}"+"&searchKeyword=${searchKeyword}";
		}
		//ê²€ìƒ‰
		$(function(){
			$('#searchBtn').click(function() {
				self.location="getCsList.do"+'${csPagination.makeQuery(1)}'+"&searchOption="+$("select[name=searchOption2]").val()+"&searchKeyword="+encodeURIComponent($('#keywordInput').val());
			});
		});
	</script>
	</body>
<%@ include file="../include/Footer.jsp"%>
</html>